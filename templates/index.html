{% extends "base.html" %}

{% block title %}Sentiment Analysis - Home{% endblock %}

{% block content %}
<div class="container mt-4">

    <!-- Hero Section -->
    <div class="jumbotron text-center bg-primary text-white p-5 rounded">
        <h1 class="display-4">Analyze Sentiments Instantly!</h1>
        <p class="lead">Enter text, get real-time sentiment insights powered by AI.</p>
        <a href="#live-analysis" class="btn btn-light btn-lg">Try It Now</a>
    </div>

    <!-- Live Sentiment Analysis Demo -->
    <div id="live-analysis" class="card shadow p-4 mt-4">
        <h2 class="text-center">Live Sentiment Analysis</h2>
        <form method="POST" action="{{ url_for('dashboard') }}">
            <div class="form-group">
                <textarea class="form-control" id="textInput" rows="3" placeholder="Enter text here..." required></textarea>
            </div>
            <button type="button" class="btn btn-success btn-block" onclick="analyzeSentiment()">Analyze</button>
        </form>
        <div id="sentimentResult" class="mt-3 text-center"></div>
    </div>

    <!-- Trending Insights -->
    <div class="mt-5">
        <h2 class="text-center">Trending Sentiments</h2>
        <div class="row">
            <div class="col-md-6">
                <canvas id="sentimentChart"></canvas>
            </div>
            <div class="col-md-6">
                <img src="{{ url_for('static', filename='wordcloud.png') }}" class="img-fluid" alt="Sentiment Word Cloud">
            </div>
        </div>
    </div>

    <!-- Features Section -->
    <div class="mt-5">
        <h2 class="text-center">Why Choose Our Sentiment Analysis?</h2>
        <div class="row text-center">
            <div class="col-md-4">
                <div class="card p-3">
                    <h4>AI-powered Analysis</h4>
                    <p>Utilizing advanced NLP models to deliver accurate sentiment analysis.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card p-3">
                    <h4>Real-time Insights</h4>
                    <p>Analyze sentiments from live Reddit posts and other sources.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card p-3">
                    <h4>Multi-language Support</h4>
                    <p>Detect sentiments in various languages across global texts.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Testimonials Section -->
    <div class="mt-5">
        <h2 class="text-center">What Users Say</h2>
        <div class="card p-3">
            <p>"This sentiment analysis tool helped me understand customer feedback better!" - <strong>Jane Doe</strong></p>
        </div>
        <div class="card p-3 mt-3">
            <p>"Great for analyzing social media trends and discussions!" - <strong>John Smith</strong></p>
        </div>
    </div>

    <!-- Poll / User Interaction -->
    <div class="mt-5">
        <h2 class="text-center">What do you use sentiment analysis for?</h2>
        <form>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="poll" id="business" value="business">
                <label class="form-check-label" for="business">Business Reviews</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="poll" id="social" value="social">
                <label class="form-check-label" for="social">Social Media Analysis</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="poll" id="research" value="research">
                <label class="form-check-label" for="research">Research & Trends</label>
            </div>
            <button type="submit" class="btn btn-primary btn-block mt-2">Submit Vote</button>
        </form>
    </div>

</div>

<!-- JavaScript for Dynamic Sentiment Analysis -->
<script>
    function analyzeSentiment() {
        let text = document.getElementById("textInput").value;
        let resultDiv = document.getElementById("sentimentResult");

        if (text.length > 0) {
            // Simulated Sentiment Result (Replace with API call later)
            let sentiments = ["Positive üòä", "Negative üòû", "Neutral üòê"];
            let sentiment = sentiments[Math.floor(Math.random() * sentiments.length)];
            resultDiv.innerHTML = `<h4 class="alert alert-info">${sentiment}</h4>`;
        } else {
            resultDiv.innerHTML = `<h4 class="alert alert-danger">Please enter text to analyze!</h4>`;
        }
    }
</script>

<!-- JavaScript for Sentiment Chart -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    var ctx = document.getElementById('sentimentChart').getContext('2d');
    var sentimentChart = new Chart(ctx, {
        type: 'doughnut',
        data: {
            labels: ['Positive', 'Negative', 'Neutral'],
            datasets: [{
                data: [45, 30, 25], // Example data
                backgroundColor: ['#28a745', '#dc3545', '#ffc107']
            }]
        }
    });
</script>
{% endblock %}
